{% extends "base.html" %}
{% block content %}

<form method=post enctype=multipart/form-data>

    <div class="mb-3">
        <label for="files">Select images</label>
        <input type=file id="imgInp" multiple="multiple" accept="image/jpeg, image/png, image/jpg" class="form-control"
            name=file onchange="loadFiles(event)">
        <div class="img_container" id="result">
        </div>
    </div>

    <div class="mb-3">
        occurrenceID
        <input type="text" class="form-control" aria-label="occurrenceID" name="occurrenceID">
    </div>

    <div class="mb-3">
        Image category
        <select class="form-select" aria-label="imageCategory" name="imageCategory">
            {% for i in imagecat %}
            <option value="{{ i }}">{{ i }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="mb-3">
        Comment
        <input type="text" class="form-control" aria-describedby="comment" placeholder="comment" name="comment">
    </div>

    <!-- Button 1-->
    <div class="d-inline mb-3">
        <button type="submit" class="btn btn-secondary" name="action1" value="VALUE1">Add</button>
    </div>
    <p></p>



    <script>
        // Find document variable
        const output = document.querySelector("#result");

        // Get input images and loop over each image
        function loadFiles(event) {
            for (let i = 0; i < event.target.files.length; i++) {
                var img_item = document.createElement("div"); // Create new div element
                img_item.className = "img_item";
                img_item.appendChild(imageAppend(event.target.files[i])); // Append element to img_item
                output.appendChild(img_item);
            }
        }

        // Append image to output
        function imageAppend(x) {
            var image = document.createElement("img"); // Create new image element
            image.src = URL.createObjectURL(x); // Add soure to image element
            image.id = x.name; // Add name to image element
            // free memory
            image.onload = function () {
                URL.revokeObjectURL(image.src); // free memory
            };
            // Return img element
            return (image);
        }
    </script>

    {% endblock %}